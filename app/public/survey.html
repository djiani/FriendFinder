<!DOCTYPE html>
<html lang="en">

<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="./style.css">
</head>

<body>



  <div class="main text-white">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center">
          <h1>Friend Finder</h1>
        </div>
        <hr>
      </div>


        <form method="POST" role="form">
          <div class="form-group m-3">
            <label for="name">Name</label>
            <input type="text" class="form-control" id="name" placeholder="Enter your name" name="name" required>
          </div>
          <div class="form-group m-3">
            <label for="photo">Picture Link</label>
            <input type="link" class="form-control" id="photo" placeholder="Link to your picture" name="photo" required>
          </div>
          <div class="form-group m-3">
            <h2>Question 1</h2>
            <p>
              My parents’ ideas about how to deal with my physical health are more important than my own ideas
            </p>
            <select name="question1" id="question1" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 </option>
            </select>
          </div>
          <div class=" form-group m-3">
            <h2>Question 2</h2>
            <p>
              My own ideas about my education or work are more important
              than my friends’ ideas.
            </p>
            <select name="question2" id="question2" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 3</h2>
            <p>
              My friend’s ideas about whom I should date or marry are more
              important than my own ideas.
            </p>
            <select name="question3" id="question3" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 4</h2>
            <p>
              My own ideas about what I should do about my physical health
              are more important than friends’ ideas
            </p>
            <select name="question4" id="question4" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 5</h2>
            <p>
              It is important to me to consider my parents’ opinions before I act.
            </p>
            <select name="question5" id="question5" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 6</h2>
            <p>
              It is important to me to consider my friends’ opinions before I act.
            </p>
            <select name="question6" id="question6" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 7</h2>
            <p>
              With my friends everyone should agree before we decide what
              activity to do.
            </p>
            <select name="question7" id="question7" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 8</h2>
            <p>
              I will financially support (or currently do support) my parents
              when they are old.
            </p>
            <select name="question8" id="question8" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 9</h2>
            <p>
              I deal with my personal problems by myself rather than ask a
              parent for help.
            </p>
            <select name="question9" id="question9" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (Strongly Disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree) </option>
            </select>
          </div>
          <div class="m-3">
            <h2>Question 10</h2>
            <p>
              Your mind is always buzzing with unexplored ideas and plans.
            </p>
            <select name="question10" id="question10" class="custom-select mb-3">
              <option> </option>
              <option value="1">1 (strongly disagree)</option>
              <option value="2">2 </option>
              <option value="3">3 </option>
              <option value="4">4 </option>
              <option value="5">5 (Strongly Agree)</option>
            </select>
          </div>
          <div class="m-3">
          <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit_btn">Submit</button>
          </div>
        </form>
      </div>
  </div>
    <script>

      $("#submit_btn").click(function (event) {
        event.preventDefault();
        const score = [];
        let questionFlag = true;
        for (let i = 1; i <= 10; i++) {
          let questVal = $("#question" + i).val().trim();
          if (questVal === "") {
            $("#question" + i).css({ "border": "3px solid #dc3545" });
            questionFlag = false;
          } else {
            $("#question" + i).css({ "border": "1px solid #ced4da" });
          }
          score.push(parseInt(questVal));

        }

        const newMatch = {
          name: $("#name").val().trim(),
          photo: $("#photo").val().trim(),
          scores: score
        }

        if (newMatch.name === "") {
          $("#name").css({ "border": "3px solid #dc3545" });

        }
        else if (newMatch.photo === "") {
          $("#name").css({ "border": "1px solid #ced4da" });
          $("#photo").css({ "border": "3px solid #dc3545" });
        } else if (questionFlag) {
          $("#photo").css({ "border": "1px solid #ced4da" });
          console.log(newMatch);
          $.post('/api/friends', newMatch, function (data) {
            //data represent a best match friend!
            console.log(data);
            if (data) {
              $(".modal-body").html(`
              <h1>${data.name}</h1>
              <img src=${data.photo} alt="image of best match friend"/>
              `);

            } else {
              $(".modal-body").html(`
              <h2>No best match found! Your are the first in the list </h2>
              `);
            }
            $("#myModal").modal("toggle");
          });
        }

      })
    </script>

    <div class="modal fade" id="myModal">
      <div class="modal-dialog">
        <div class="modal-content">

          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Best Match Friend</h4>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>

          <!-- Modal body -->
          <div class="modal-body">
            Modal body..
          </div>

          <!-- Modal footer -->
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
          </div>

        </div>
      </div>
    </div>


</body>

</html>